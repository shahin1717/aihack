<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>PhishGuard â€“ Campaigns</title>
    <link rel="stylesheet" href="/static/css/material.css">
</head>

<body>

<header class="topbar">
    <h1>PhishGuard Campaigns</h1>
</header>

<nav class="navbar">
    <a href="/employees.html">Employees</a>
    <a href="/campaigns.html" class="active">Campaigns</a>
    <a href="/dashboard.html">Dashboard</a>

    <div class="navbar-right">
        <span class="pill" id="auth-email">Not logged in</span>
        <button class="btn-small" id="btn-logout">Logout</button>
    </div>
</nav>

<div class="container">

    <!-- Single main card: setup + AI + send -->
    <div class="card">
        <h2>Create phishing simulation</h2>
        <p class="text-muted">
            Configure the campaign, let AI generate a realistic phishing email, then send it to your employees.
        </p>

        <!-- Campaign basics -->
        <label for="camp-title">Internal campaign title</label>
        <input id="camp-title" placeholder="Q1 password audit">

        <label for="camp-scenario">Scenario</label>
        <select id="camp-scenario">
            <option value="Password reset request">Password reset request</option>
            <option value="Employee payroll update">Employee payroll update</option>
            <option value="VPN security alert">VPN security alert</option>
            <option value="Invoice overdue">Invoice overdue</option>
            <option value="HR disciplinary notice">HR disciplinary notice</option>
        </select>

        <!-- Recipients -->
        <label for="camp-ids">Target employee IDs</label>
        <input id="camp-ids" placeholder="1, 2, 3">
        <button type="button" class="btn-secondary" id="btn-use-all">
            Use all employees
        </button>

        <button type="button" id="btn-generate-ai">
            Generate email with AI
        </button>
        <small id="gen-status"></small>

        <hr style="margin: 18px 0; border-color:#111827;">

        <!-- AI-generated email details -->
        <h2 style="margin-top:0;">AI-Generated Email Preview</h2>

        <label for="ai-sender-name">Sender name</label>
        <input id="ai-sender-name" placeholder="IT Security Team">

        <label for="ai-sender-email">Sender email</label>
        <!-- prefilled from your SMTP_FROM_EMAIL -->
        <input id="ai-sender-email" value="secure.alert.notice@gmail.com">

        <label for="ai-subject">Subject</label>
        <input id="ai-subject" placeholder="Subject generated by AI">

        <label for="ai-body">Body</label>
        <textarea id="ai-body" placeholder="HTML email body generated by AI"></textarea>

        <button type="button" id="btn-send-campaign">
            Send campaign
        </button>
        <small id="camp-status"></small>
    </div>

    <!-- Existing campaigns list -->
    <div class="card">
        <h2>Previous campaigns</h2>
        <button type="button" class="btn-secondary" id="btn-reload-campaigns">
            Reload campaigns
        </button>
        <small id="camp-list-status"></small>

        <table id="camp-table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Scenario</th>
                <th>Sender</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <!-- filled by JS -->
            </tbody>
        </table>
    </div>

</div>

<script src="/static/js/utils.js"></script>
<script src="/static/js/campaigns.js"></script>
</body>
</html>
